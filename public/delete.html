<!doctype html>
<html>
<head><meta charset="utf-8"><title>Delete Recipe</title></head>
<body>
  <nav>
    <a href="/index.html">Home</a> |
    <a href="/view.html">View recipes</a> |
    <a href="/create.html">Post recipe</a> |
    <a href="/edit.html">Edit recipe</a> |
    <a href="/delete.html">Delete recipe</a>
  </nav>

  <h1>Delete Recipe</h1>

  <p>Enter recipe id to delete:</p>
  <input id="id" placeholder="Recipe id" />
  <button id="del" type="button">Delete</button>

  <pre id="out">Waitingâ€¦</pre>

  <script src="/config.js"></script>
  <script>
    const out = document.getElementById("out");
    const show = (x) => out.textContent = typeof x === "string" ? x : JSON.stringify(x, null, 2);

    document.getElementById("del").addEventListener("click", async () => {
      const id = document.getElementById("id").value.trim();
      if (!id) return show("Enter an id.");

      const url = `${window.API_BASE}/recipeService/${encodeURIComponent(id)}?authorId=${encodeURIComponent(window.AUTHOR_ID)}`;
      const resp = await fetch(url, { method: "DELETE" });

      if (resp.status === 204) return show({ success: true, deletedId: id });
      const text = await resp.text();
      show({ error: "delete failed", status: resp.status, body: text });
    });
  </script>
</body>
</html>
